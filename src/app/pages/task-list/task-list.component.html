<main
  class="flex-grow-1 py-6 bg-surface-secondary marg-sm"
  style="padding-top: 56px"
>
  <div class="container">
    <a href="" class="my-5 mx-5 h2">New Task</a>
    <div class="d-flex mt-5">
      <div class="row">
        <ng-container *ngIf="!isLoading; else skeletonTemplate">
          <!-- <div class="task-card-container"> -->
          <div
            *ngFor="let task of tasks"
            class="d-flex justify-content-center col-md-6 col-sm-12 col-lg-4"
          >
            <div
              class="flex-shrink-0 flex-xl-fill d-flex flex-column w-80 h-full"
            >
              <div class="flex-1 overflow-y-auto">
                <div class="px-3 mb-3">
                  <div class="card" style="width: 18rem">
                    <div class="card-body task-card">
                      <div (click)="goTask(task?.id)">
                        <div style="width: 100%; height: 123px; display: flex">
                          <img
                            [src]="task?.image"
                            class="card-img-top rounded-2"
                            alt="..."
                          />
                        </div>
                        <b class="h5">{{ task.title }}</b>
                        <span
                          class="text-xs text-uppercase text-muted d-block ls-wide font-semibold mb-5"
                          >{{ task.domain }}
                        </span>
                        <div class="d-flex mt-5 mb-2">
                          <span class="">Progress</span>
                          <div class="col px-0 text-end">
                            <a href="#" class="text-heading text-sm"
                              >{{ task.progression * 100 }}%
                            </a>
                          </div>
                        </div>
                        <div class="d-flex align-items-center">
                          <div style="width: 100%">
                            <div class="progress progress-sm shadow-none">
                              <div
                                *ngIf="task.progression !== undefined"
                                class="progress-bar bg-primary"
                                role="progressbar"
                                [style.width.%]="task.progression * 100"
                                aria-valuemin="0"
                                aria-valuemax="100"
                              ></div>
                            </div>
                          </div>
                        </div>
                        <div class="d-flex align-items-center mt-3">
                          <div class="d-flex justify-content-between">
                            <i class="bi bi-clock text-muted"></i>
                            <div class="mx-2">
                              {{ task.nombre_heures }}heures
                            </div>
                          </div>
                          <div class="ms-auto">
                            <div class="avatar-group">
                              <a
                                *ngFor="let participant of task?.participants"
                                href="#"
                                [pTooltip]="participant"
                                class="avatar avatar-xs rounded-circle text-white border border-1 border-solid border-card"
                                ><img
                                  alt="participant"
                                  src="https://us.123rf.com/450wm/blinkblink1/blinkblink12005/blinkblink1200500015/146979464-avatar-ic%C3%B4ne-de-l-homme.jpg?ver=6"
                                />
                              </a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- </div> -->
        </ng-container>
      </div>
    </div>
  </div>
</main>
<ng-template #skeletonTemplate>
  <div class="" *ngIf="!noTaskFound; else noTask">
    <div class="row">
      <div
        class="d-flex justify-content-center col-md-6 col-sm-12 col-lg-4"
        *ngFor="let i of [1, 2, 3, 4, 5]"
      >
        <div class="flex-shrink-0 flex-xl-fill d-flex flex-column w-80 h-full">
          <div class="flex-1 overflow-y-auto">
            <div class="px-3 mb-3">
              <div class="card" style="width: 18rem">
                <div class="card-body task-card">
                  <div style="width: 100%; height: 123px; display: flex">
                    <p-skeleton
                      height="110px"
                      styleClass=""
                      width="238px"
                      borderRadius="16px"
                    ></p-skeleton>
                  </div>
                  <b class="h5">
                    <p-skeleton styleClass="mb-2"></p-skeleton>
                  </b>
                  <span
                    class="text-xs text-uppercase text-muted d-block ls-wide font-semibold mb-5"
                  >
                    <p-skeleton width="5rem" styleClass=""></p-skeleton>
                  </span>
                  <div class="d-flex mt-5 mb-2">
                    <span class="">
                      <p-skeleton styleClass=""></p-skeleton>
                    </span>
                    <div class="col px-0 text-end">
                      <a href="#" class="text-heading text-sm">
                        <p-skeleton styleClass=""></p-skeleton>
                      </a>
                    </div>
                  </div>

                  <div class="d-flex align-items-center">
                    <div style="width: 100%">
                      <div class="progress progress-sm shadow-none">
                        <p-skeleton styleClass=""></p-skeleton>
                      </div>
                    </div>
                  </div>

                  <div class="d-flex align-items-center mt-3">
                    <div class="d-flex justify-content-between">
                      <p-skeleton width="4rem" height="1rem"></p-skeleton>
                      <div class="mx-2">
                        <p-skeleton styleClass=""></p-skeleton>
                      </div>
                    </div>

                    <div class="ms-auto">
                      <p-skeleton width="4rem" height="1rem"></p-skeleton>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <ng-template #noTask>
    <div class="text-center card no-task-message my-5">
      <b class="text-danger my-4 border-0" style="font-size: large"
        >Aucune t√¢che disponible.</b
      >
    </div>
  </ng-template>
</ng-template>
